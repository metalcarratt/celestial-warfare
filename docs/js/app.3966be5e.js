(function(){"use strict";var e={3675:function(e,t,n){var i=n(9242),o=n(3396),s=n(4870);function a(e,t){return(0,o.wg)(),(0,o.iD)("button",null,[(0,o.WI)(e.$slots,"default",{},void 0,!0)])}var l=n(89);const r={},c=(0,l.Z)(r,[["render",a],["__scopeId","data-v-d9ffa608"]]);var u=c;const g={class:"sidePanel"};function p(e,t){return(0,o.wg)(),(0,o.iD)("div",g,[(0,o.WI)(e.$slots,"default",{},void 0,!0)])}const d={},m=(0,l.Z)(d,[["render",p],["__scopeId","data-v-99f5b094"]]);var h=m,v=n(7139);const f={class:"items"};function y(e,t){return(0,o.wg)(),(0,o.iD)("span",f,[(0,o.WI)(e.$slots,"default",{},void 0,!0)])}const w={},_=(0,l.Z)(w,[["render",y],["__scopeId","data-v-33492c5a"]]);var k=_;const b={class:"next-steps"};function S(e,t){return(0,o.wg)(),(0,o.iD)("div",b,[(0,o.WI)(e.$slots,"default",{},void 0,!0)])}const T={},L=(0,l.Z)(T,[["render",S],["__scopeId","data-v-fd54e5dc"]]);var I=L,A=n(65);const D="Residence",C="Mountain",P="Seclusion Chambers",E="Artefact School",M="Furnace",G="Herb Farm",H="Apothecary",q="Gate",B="Library",Y="Beast Pavilion",O="Formation Pavilion",U="Combat Arena";var F,N;(function(e){e["CRAFTING_1"]="Crafting 1",e["HERBALISM_1"]="Herbalism 1",e["APOTHECARY_1"]="Apothecary 1",e["FORMATIONS_1"]="Formations 1",e["BEAST_TAMING_1"]="Beast Taming 1",e["VITALITY_PILL"]="Concoct Vitality Pill",e["SHIELD"]="Crafting Shields",e["ELEMENTAL_STONE"]="Crafting elemental stone"})(F||(F={})),function(e){e["CRAFTING_LEVEL_1"]="Crafting Level 1",e["HERBALISM_1"]="Growing Herbs 1",e["APOTHECARY_1"]="Making potions 1",e["VITALITY_PILL"]="Vitality Pill",e["SHIELD_BOOK"]="Crafting Shields",e["FORMATIONS_1"]="Formations Level 1",e["BEAST_TAMING_1"]="Beast Taming 1"}(N||(N={}));const x={name:N.CRAFTING_LEVEL_1,prerequisites:[],skill:F.CRAFTING_1},j={name:N.HERBALISM_1,prerequisites:[],skill:F.HERBALISM_1},K={name:N.APOTHECARY_1,prerequisites:[],skill:F.APOTHECARY_1},R={name:N.VITALITY_PILL,prerequisites:[F.APOTHECARY_1],skill:F.VITALITY_PILL},W={name:N.SHIELD_BOOK,prerequisites:[F.CRAFTING_1],skill:F.SHIELD},$={name:N.FORMATIONS_1,prerequisites:[],skill:F.FORMATIONS_1},Z={name:N.BEAST_TAMING_1,prerequisites:[],skill:F.BEAST_TAMING_1},z=[x,j,K,R,W,$,Z],V=(e,t)=>{console.log("Studying "+t.name),e.skills.learnSkill(t.skill)},Q=e=>{const t=[];return z.filter((t=>!e.skills.knows(t.skill)&&t.prerequisites.every((t=>e.skills.knows(t))))).forEach((n=>t.push({name:`Study ${n.name}`,describe:`Studying ${n.name}`,action:()=>V(e,n)}))),t},J={title:"Library",icon:"library.png",built:()=>!0,build:()=>{},canBuild:()=>!0,occupants:()=>Ke.people().filter((e=>e.location.eq(B))),canGo:()=>!0,actions:Q},X={name:"Cultivate",describe:"Cultivating",action:e=>e.cultivator.cultivate()},ee={title:D,icon:"house.png",built:()=>!0,build:()=>{},canBuild:()=>!0,occupants:()=>Ke.people().filter((e=>e.location.eq(D))),canGo:()=>!0,defaultAction:X},te=()=>({selected:5,plots:[null,null,null,null,null,ee,null,null,null,null,J,null,null,null,null,null]}),ne="Ginseng",ie="Fire Lily",oe={name:ne,gestationPeriod:4,yield:4},se={name:ie,gestationPeriod:2,yield:8},ae=[ne,ie],le=[oe,se],re=e=>le.find((t=>t.name===e)),ce="Spirit Stone",ue="Mid-grade Spirit Stone",ge="Minerals",pe=(e,t)=>{const n=t-e+1;return Math.floor(Math.random()*n)+e},de=()=>({type:"Spirit Stones",description:"Stones embued with spiritual energy, they are a crucial tool to increasing the speed of cultivating spiritual energy.",icon:"sstone.png",action:{name:"Mine Spirit Stones",describe:"Mining Spirit Stones",action:e=>e.inventory.add(ce,pe(3,5))}}),me=()=>({type:"Mid-grade Spirit Stones",description:"Stones embued with spiritual energy. Mid-grade spirit stones contain higher density Qi than standard spirit stones.",icon:"mstone.png",action:{name:"Mine Spirit Stones",describe:"Mining Spirit Stones",action:e=>e.inventory.add(ue,pe(1,2))}}),he=()=>({type:"Ginseng",description:"A herb embued with spiritual energy, it can be used for cultivation or brewing elixers.",icon:"ginseng.jpg",action:{name:"Gather Ginseng",describe:"Gathering Ginseng",action:e=>e.inventory.add(ne,pe(1,2))}}),ve=()=>({type:"Fire Lily",description:"A lily with a natural flame energy.",icon:"firelily.jpg",action:{name:"Gather Fire Lillies",describe:"Gathering Fire Lillies",action:e=>e.inventory.add(ie,pe(1,2))}}),fe=()=>({type:"Minerals",description:"Common crafting materials.",icon:"minerals.webp",action:{name:"Mine minerals",describe:"Mining minerals",action:e=>e.inventory.add(ge,pe(3,5))}}),ye=e=>({type:"Forest",tile:"forest.png",color:"green",resource:e}),we=e=>({type:"Dirt",tile:"dirt.png",color:"brown",resource:e}),_e=e=>({type:"Mountain",tile:"rock.jpg",color:"grey",resource:e}),ke=e=>({type:"Sect",tile:"rock.jpg",building:"sect.png",color:"grey",resource:e}),be=[[ye(),ye(),ye(),ye(),ye(),ye(),ye(),ye(),ye()],[ye(),ye(),we(),we(),ye(),ye(),ye(),ye(),ye()],[ye(),we(),we(),we(),_e(me()),ye(),ye(),ye(),ye()],[ye(),ye(),we(),_e(de()),_e(fe()),_e(),ye(),ye(),ye()],[ye(),ye(),ye(ve()),ye(he()),ke(),_e(),_e(),ye(),ye()],[ye(),ye(),ye(),ye(),ye(),_e(),ye(),ye(),ye()],[ye(),ye(),ye(),ye(),ye(),ye(),ye(),ye(),ye()],[ye(),ye(),ye(),ye(),ye(),ye(),ye(),ye(),ye()],[ye(),ye(),ye(),ye(),ye(),ye(),ye(),ye(),ye()]],Se=()=>({selectedCoords:{x:4,y:4},tiles:be}),Te={name:"Mortal",spiritEnergy:0,enlightenment:0,sense:0},Le={name:"Foundation",spiritEnergy:10,enlightenment:0,sense:0},Ie={name:"Vision",spiritEnergy:100,enlightenment:10,sense:0},Ae={name:"Dominance",spiritEnergy:1e3,enlightenment:100,sense:10},De={name:"Transcendence",spiritEnergy:1e4,enlightenment:1e3,sense:100},Ce=e=>{switch(e){case 1:return Le;case 2:return Ie;case 3:return Ae;case 4:return De;default:return Te}};var Pe;(function(e){e["Male"]="Male",e["Female"]="Female"})(Pe||(Pe={}));const Ee=()=>{const e=Math.floor(2*Math.random());return 1===e?Pe.Male:Pe.Female},Me=e=>{if(e===Pe.Male){const e=Math.floor(20*Math.random())+1;return`male${e<10?"0":""}${e}`}{const e=Math.floor(30*Math.random())+1;return`female${e<10?"0":""}${e}`}},Ge=["Bai","Cai","Cao","Chang","Chen","Cheng","Cui","Dai","Deng","Ding","Dong","Du","Duan","Fan","Fang","Feng","Fu","Gao","Gong","Gu","Guo","Han","Hao","He","Hou","Hong","Hu","Huang","Jia","Jian","Jiang","Jin","Kang","Ke","Kong","Lai","Lei","Li","Liang","Liao","Lin","Liu","Long","Lu","Luo","Ma","Mao","Meng","Mo","Ou","Pan","Peng","Qian","Qiao","Qin","Qiu","Ren","Shao","Shen","Shi","Song","Su","Sun","Tan","Tang","Tao","Tian","Wan","Wang","Wei","Wen","Wu","Xia","Xiang","Xiao","Xie","Xin","Xiong","Xu","Xue","Yan","Yang","Yao","Ye","Yi","Yin","Yu","Yuan","Zeng","Zhang","Zhao","Zheng","Zhong","Zhou","Zhu","Zhuang","Zou"],He=["Xiu","Zixuan","Zihan","Yuxuan","Yuze","Xiang","Wei","Tao","Shi","Kai","Hao-Yu","Haoran","Guo","Fu","Dong","Da-Fu","Chih-Cheng","Chen","Chao","Bowen","Aiguo","Tu","Syaoran","Taio","Shen","Shan","Ming","Manchu","Longwei","Lim","Lee","Kuo","Kong","Kang","Jing","Jiao-Long","Hu","Hou","Hong","Fa","Dingbang","Delun","Chung","Chaun","Chang","Li Qiang","Li Jun","Bambang","Zhang Yong","Li Jie"],qe=["Alix","Bethsheba","Hien","Gho","Diu","Da Xia","Genji","Hop","Huan","Jia Li","Jiao","Liling","Lin","Liu","Loi","Luan","Meilin","Meiling","Niu","Nuo","Qing","Nuwa","Qi","Na","Li Hua","Lixue","Nuan","Ming Yue","Mey","Meiying","Lien","Lian","Li Ming","Lai","Pangfua","Qinyang","Ting","Ushi","Yun","Caihong","Ju","Jilpa","Heng","Genji","Da Xia","Chu","Bo","Bai","Wang Fang","Li Jing"],Be=e=>{const t=Math.floor(Math.random()*Ge.length),n=Ge[t];if(e===Pe.Male){const e=Math.floor(Math.random()*He.length),t=He[e];return`${n} ${t}`}{const e=Math.floor(Math.random()*qe.length),t=qe[e];return`${n} ${t}`}};let Ye=1;const Oe=()=>{const e=Ee(),t=Be(e),n=Me(e);return{id:Ye++,name:t,gender:e,face:n,location:D,coords:{x:4,y:4},travelling:!1,energy:2,doing:"",cultivation:{level:0,spiritEnergy:0,enlightenment:0,sense:0},craftsman:{artefactKnowledge:0,craftsmanLevel:0,craftingTarget:"",craftingSkill:0},inventory:{},skills:[],goal:{type:void 0}}},Ue=e=>Ce(e).name,Fe="sect",Ne="outside",xe=(0,A.MT)({state:{selectedPerson:void 0,artefactSchool:!1,furnace:!1,people:[],inventory:{},residence:{mountain:!1,seclusion:!1,trialRealm:!1},apothecary:{herbFarm:!1,farm:[],apothecary:!1},library:{built:!0},beastPen:{built:!1},formationPavilion:{built:!1},arena:{built:!1},buildingsStore:te(),mapStore:Se(),view:Fe}}),je=e=>{const t=xe.state.people.find((t=>t.id===e));return t?new Ht(t):void 0};var Ke={store:xe,artefactSchool:()=>xe.state.artefactSchool,furnace:()=>xe.state.furnace,people:()=>xe.state.people.map((e=>new Ht(e))),buildSchool:()=>{xe.state.artefactSchool=!0},buildFurnace:()=>{xe.state.furnace=!0},recruit(){const e=Oe();xe.state.people.push(e),this.setSelectedPerson(e.id)},getPerson:je,inventory:()=>xe.state.inventory,setSelectedPerson(e){xe.state.selectedPerson=e},getSelectedPersonId(){return xe.state.selectedPerson},getSelectedPerson(){return xe.state.selectedPerson?je(xe.state.selectedPerson):void 0},isSect(){return xe.state.view===Fe},isOutside(){return xe.state.view===Ne},goOutside(){xe.state.view=Ne},goSect(){xe.state.view=Fe},hasTraveller(){return xe.state.people.some((e=>e.travelling))}};const Re={name:"None",artefactKnowledge:0,craftingSkill:0},We={name:"Foundation",artefactKnowledge:5,craftingSkill:0},$e={name:"Vision",artefactKnowledge:15,craftingSkill:3},Ze={name:"Dominance",artefactKnowledge:100,craftingSkill:100},ze={name:"Transcendence",artefactKnowledge:1e3,craftingSkill:1e3},Ve=e=>{switch(e){case 1:return We;case 2:return $e;case 3:return Ze;case 4:return ze;default:return Re}};class Qe{constructor(e){this.store=e.craftsman}level(){return this.store.craftsmanLevel}levelUp(){this.store.craftsmanLevel+=1}artefactKnowledge(){return this.store.artefactKnowledge}increaseArtefactKnowledge(e){const t=Ve(this.level()+1);this.artefactKnowledge()<t.artefactKnowledge&&(this.store.artefactKnowledge+=e),this.nextCraftsmanLevel()}craftingSkill(){return this.store.craftingSkill}increaseCraftingSkill(e){const t=Ve(this.level()+1);this.craftingSkill()<t.craftingSkill&&(this.store.craftingSkill+=e),this.nextCraftsmanLevel()}nextCraftsmanLevel(){const e=Ve(this.level()+1);this.artefactKnowledge()>=e.artefactKnowledge&&this.craftingSkill()>=e.craftingSkill&&this.levelUp()}}var Je;(function(e){e["VITALITY_PILL"]="Vitality Pill"})(Je||(Je={}));const Xe={name:Je.VITALITY_PILL,ingredients:{[ne]:1},skill:F.VITALITY_PILL,yield:2},et=[Xe];class tt{constructor(e,t){this.person=t,this.store=e.cultivation}qi(){return this.store.spiritEnergy}increaseQi(e){this.store.spiritEnergy+=e}level(){return this.store.level}levelUp(){this.store.level+=1}minLevel(e){return this.store.level>=e}enlightenment(){return this.store.enlightenment}sense(){return this.store.sense}nextLevelType(){return Ce(this.level()+1)}cultivate(){this.qi()<this.nextLevelType().spiritEnergy&&(this.person.inventory.has(ue)>0?(this.person.inventory.take(ue,1),this.increaseQi(15)):this.person.inventory.has(ce)>0?(this.person.inventory.take(ce,1),this.increaseQi(5)):this.person.inventory.has(Je.VITALITY_PILL)?(this.person.inventory.take(Je.VITALITY_PILL,1),this.increaseQi(2)):this.increaseQi(1),this.nextLevel())}gainEnlightenment(){this.enlightenment()<this.nextLevelType().enlightenment&&(this.store.enlightenment+=1,this.nextLevel())}senseElements(){this.sense()<this.nextLevelType().sense&&(this.store.sense+=1,this.nextLevel())}nextLevel(){const e=this.nextLevelType();this.qi()>=e.spiritEnergy&&this.enlightenment()>=e.enlightenment&&this.sense()>=e.sense&&this.levelUp()}}class nt{constructor(e,t){this.store=e,this.person=t}set(e,t){this.store.action={action:e,target:t}}clear(){this.store.action=void 0}perform(){this.store.action&&this.store.action.action.action(this.person)}getTarget(){return this.store.action?this.store.action.target:""}hasAction(){return void 0!==this.store.action}getAction(){return this.store.action?this.store.action.action:null}doing(){let e;if(this.store.action)e=this.store.action.action.describe;else{const t=this.person.location.is();e=t?.defaultAction?.describe}return"string"===typeof e?e:"function"===typeof e?e(this.person):""}}class it{constructor(e){this.store=e.inventory}add(e,t){this.store[e]?this.store[e]+=t:this.store[e]=t}has(e){return this.store[e]?this.store[e]:0}take(e,t){this.store[e]?this.store[e]-=t:this.store[e]=0}items(){return Object.keys(this.store)}}const ot=(e,t)=>{Object.keys(t.ingredients).forEach((n=>e.inventory.take(n,t.ingredients[n]))),e.inventory.add(t.name,t.yield)},st=e=>{const t=[];for(const n of et){const i=!n.skill||e.skills.knows(n.skill),o=Object.keys(n.ingredients).every((t=>e.inventory.has(t)>=n.ingredients[t]));i&&o&&t.push({name:`Concoct ${n.name}`,describe:`Concocting ${n.name}`,action:()=>ot(e,n)})}return t},at={title:H,icon:"apothecary.png",built:()=>Ke.store.state.apothecary.apothecary,build:()=>Ke.store.state.apothecary.apothecary=!0,canBuild:()=>!0,occupants:()=>Ke.people().filter((e=>e.location.eq(H))),canGo:e=>e.skills.knows(F.APOTHECARY_1)&&e.cultivator.level()>=1,actions:st},lt={title:q,icon:"map.png",built:()=>!0,build:()=>{},canBuild:()=>!0,occupants:()=>Ke.people().filter((e=>e.location.eq(q))),canGo:()=>!0,actions:e=>{const t=[],n=e.location.getTile();return n.resource&&t.push(n.resource.action),t}},rt={name:"Gain Enlightenment",describe:"Gaining Enlightenment",action:e=>e.cultivator.gainEnlightenment()},ct={title:C,icon:"mountain.png",built:()=>Ke.store.state.residence.mountain,build:()=>Ke.store.state.residence.mountain=!0,canBuild:()=>!0,occupants:()=>Ke.people().filter((e=>e.location.eq(C))),canGo:e=>e.cultivator.minLevel(1),defaultAction:rt},ut={name:"Sense Elements",describe:"Sensing Elements",action:e=>e.cultivator.senseElements()},gt={title:P,icon:"cave.png",built:()=>Ke.store.state.residence.seclusion,build:()=>Ke.store.state.residence.seclusion=!0,canBuild:()=>ct.built(),occupants:()=>Ke.people().filter((e=>e.location.eq(P))),canGo:e=>e.cultivator.minLevel(2),defaultAction:ut},pt={title:"Trial Realm",icon:"trial.png",built:()=>Ke.store.state.residence.trialRealm,build:()=>Ke.store.state.residence.trialRealm=!0,canBuild:()=>gt.built(),occupants:()=>[],canGo:()=>!1};var dt={plant(e,t){console.log("Planting "+e),Ke.store.state.apothecary.farm.push({herb:e,gestation:0,person:t})},grow(){const e=Ke.store.state.apothecary.farm;for(const t of e){t.gestation+=1;const e=re(t.herb);if(e&&t.gestation>=e.gestationPeriod){t.person.inventory.add(t.herb,e.yield);const n=Ke.store.state.apothecary.farm.indexOf(t);Ke.store.state.apothecary.farm.splice(n,1)}}},getDetails(){const e=[];for(const t of Ke.store.state.apothecary.farm){const n=re(t.herb);e.push({item:t.herb,detail:`Gestation ${t.gestation}/${n?.gestationPeriod} for person ${t.person.id()}`})}return e}};const mt=e=>{const t=[];return ae.filter((t=>e.inventory.has(t))).forEach((n=>t.push({name:`Plant ${n}`,describe:`Planting ${n}`,action:()=>dt.plant(n,e)}))),t},ht={title:"Herb Farm",icon:"herb-farm.png",details(){return dt.getDetails()},built:()=>Ke.store.state.apothecary.herbFarm,build:()=>Ke.store.state.apothecary.herbFarm=!0,canBuild:()=>!0,occupants:()=>Ke.people().filter((e=>e.location.eq(G))),canGo:e=>e.skills.knows(F.HERBALISM_1)&&e.cultivator.level()>=1,actions:mt},vt={name:"Shield",craftsmanLevel:1,materials:{[ce]:1,[ge]:1},skill:F.SHIELD,createNew:()=>({type:"Shield"})},ft={name:"Elemental Stone",craftsmanLevel:2,materials:{[ce]:2,[ge]:1},skill:F.ELEMENTAL_STONE,createNew:()=>({type:"Elemental Stone"})},yt=[vt,ft],wt={craft(e,t){if(console.log("crafting"),e){console.log(e);for(const n of Object.keys(e.materials)){const i=e.materials[n];t.inventory.take(n,i)}t.craftsman.increaseCraftingSkill(1),t.inventory.add(e.name,1)}}},_t=(e,t)=>{const n=Object.keys(t.materials).every((n=>e.inventory.has(n)>=t.materials[n])),i=e.skills.knows(t.skill);return i&&n},kt=e=>{const t=[];return yt.filter((t=>_t(e,t))).forEach((n=>{t.push({name:`Craft ${n.name}`,describe:()=>`Crafting ${n.name}`,action:()=>wt.craft(n,e)})})),t},bt={title:M,icon:"furnace.png",built:()=>Ke.furnace(),build:()=>Ke.buildFurnace(),canBuild:()=>!0,occupants:()=>Ke.people().filter((e=>e.location.eq(M))),canGo:e=>e.skills.knows(F.CRAFTING_1),actions:kt},St={title:Y,icon:"beast.png",built:()=>Ke.store.state.beastPen.built,build:()=>Ke.store.state.beastPen.built=!0,canBuild:()=>!0,occupants:()=>Ke.people().filter((e=>e.location.eq(Y))),canGo:e=>e.cultivator.level()>=1&&e.skills.knows(F.BEAST_TAMING_1),actions:()=>[]},Tt={title:O,icon:"rune.jpg",built:()=>Ke.store.state.formationPavilion.built,build:()=>Ke.store.state.formationPavilion.built=!0,canBuild:()=>!0,occupants:()=>Ke.people().filter((e=>e.location.eq(O))),canGo:e=>e.cultivator.level()>=1&&e.skills.knows(F.FORMATIONS_1),actions:()=>[]},Lt={title:U,icon:"arena.png",built:()=>Ke.store.state.arena.built,build:()=>Ke.store.state.arena.built=!0,canBuild:()=>!0,occupants:()=>Ke.people().filter((e=>e.location.eq(U))),canGo:()=>!0,actions:()=>[]},It=[lt,ee,ct,gt,pt,ht,at,bt,J,Tt,Lt,St],At=e=>{const t=It.find((t=>t.title===e));if(!t)throw"Error finding building for name "+e;return t},Dt=Ke.store.state.mapStore,Ct={tileSelected(e,t){return Dt.selectedCoords.x===e&&Dt.selectedCoords.y===t},selectTile(e,t){Dt.selectedCoords.x=e,Dt.selectedCoords.y=t},selectedTile(){return Dt.tiles[Dt.selectedCoords.y][Dt.selectedCoords.x]},selectedTileOccupants(){return Ke.people().filter((e=>e.location.eq(q)&&e.location.coordsIs(Dt.selectedCoords)))},getTiles(){return Dt.tiles},getTileAt(e,t){return Dt.tiles[t][e]}};class Pt{constructor(e){this.store=e}eq(e){return this.store.location===e}goTo(e){this.store.location=e}is(){return At(this.store.location)}coordsIs({x:e,y:t}){return this.store.coords.x===e&&this.store.coords.y===t}canTravel(){return this.store.energy>=1}travelTime(){return this.store.energy}startTravelling(){this.canTravel()&&(this.store.travelling=!0)}stopTravelling(){this.store.travelling=!1}isTravelling(){return this.store.travelling}inTravelRegion(e,t){return e>=this.store.coords.x-1&&e<=this.store.coords.x+1&&t>=this.store.coords.y-1&&t<=this.store.coords.y+1}travelTo(e,t){this.store.coords.x=e,this.store.coords.y=t,this.store.energy-=1,0===this.store.energy&&this.stopTravelling()}restoreEnergy(){this.store.energy=2}getTile(){return Ct.getTileAt(this.store.coords.x,this.store.coords.y)}}class Et{constructor(e){this.store=e}learnSkill(e){this.store.skills.push(e)}listAll(){return this.store.skills}knows(e){return this.store.skills.includes(e)}}const Mt=(e,t)=>{if(e.pre)for(const n of e.pre(t))if(n.g.complete(t,n.q))console.log("Complete goal action: "+n.g.name);else if(Mt(n.g,t),t.action.hasAction())return;console.log("Start goal action: "+e.name),e.action(t)};class Gt{constructor(e,t){this.store=e.goal,this.person=t}assignGoal(e){console.log("Assign goal "+e.name),this.store.type=e,this.processGoal()}hasGoal(){return void 0!==this.store.type}goalName(){return this.store.type?.name}processGoal(){this.store.type&&(this.store.type.complete(this.person)?(console.log("Complete goal action: "+this.store.type.name),this.store.type=void 0):(Mt(this.store.type,this.person),this.store.type.complete(this.person)&&(console.log("Complete goal action: "+this.store.type.name),this.store.type=void 0)))}}class Ht{constructor(e){this.ps=e,this.cultivator=new tt(this.ps,this),this.inventory=new it(this.ps),this.location=new Pt(this.ps),this.craftsman=new Qe(this.ps),this.action=new nt(this.ps,this),this.skills=new Et(this.ps),this.goals=new Gt(this.ps,this)}id(){return this.ps.id}name(){return this.ps.name}face(){return`assets/img/faces/${this.ps.face}.png`}gender(){return this.ps.gender}isSelected(){return this.ps.id===Ke.getSelectedPersonId()}}const qt=e=>((0,o.dD)("data-v-3332a554"),e=e(),(0,o.Cn)(),e),Bt=qt((()=>(0,o._)("h2",null,"Cultivation",-1)));var Yt={__name:"CultivationDetails",props:{person:Ht},setup(e){const t=e,n=(0,o.Fl)((()=>t.person.cultivator));return(e,t)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[Bt,(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Spirit Energy: "+(0,v.zw)((0,s.SU)(n).qi()),1)])),_:1}),(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Enlightenment: "+(0,v.zw)((0,s.SU)(n).enlightenment()),1)])),_:1}),(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Sense: "+(0,v.zw)((0,s.SU)(n).sense()),1)])),_:1}),(0,o.Wm)(I,null,{default:(0,o.w5)((()=>[(0,o._)("label",null,"Next level: "+(0,v.zw)((0,s.SU)(n).nextLevelType().name),1),(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Spirit Energy: "+(0,v.zw)((0,s.SU)(n).nextLevelType().spiritEnergy),1)])),_:1}),(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Enlightenment: "+(0,v.zw)((0,s.SU)(n).nextLevelType().enlightenment),1)])),_:1})])),_:1})],64))}};const Ot=(0,l.Z)(Yt,[["__scopeId","data-v-3332a554"]]);var Ut=Ot;const Ft=e=>((0,o.dD)("data-v-3f52b468"),e=e(),(0,o.Cn)(),e),Nt=Ft((()=>(0,o._)("h2",null,"Craftsman",-1)));var xt={__name:"CraftsmanDetails",props:{person:Object},setup(e){const t=e,n=(0,o.Fl)((()=>t.person.craftsman));return(e,i)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[Nt,(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Craftsman level: "+(0,v.zw)((0,s.SU)(Ve)(t.person.craftsman.level()).name),1)])),_:1}),(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Artefact Knowledge: "+(0,v.zw)((0,s.SU)(n).artefactKnowledge()),1)])),_:1}),(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Crafting Skill: "+(0,v.zw)((0,s.SU)(n).craftingSkill()),1)])),_:1})],64))}};const jt=(0,l.Z)(xt,[["__scopeId","data-v-3f52b468"]]);var Kt=jt;const Rt=e=>((0,o.dD)("data-v-1dee4092"),e=e(),(0,o.Cn)(),e),Wt={key:0},$t=Rt((()=>(0,o._)("h2",null,"Actions...",-1))),Zt=["onClick"];var zt={__name:"BuildingActions",props:{person:Ht},setup(e){const t=e,n=(0,s.iH)(""),a=()=>t.person.location.is(),l=e=>t.person.action.set(e,n.value);return(s,r)=>!a().actions||t.person.action.hasAction()||t.person.location.isTravelling()?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",Wt,[$t,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a().actions(e.person),((t,s)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:s},[t.targets&&t.targets(e.person)?(0,o.wy)(((0,o.wg)(),(0,o.iD)("select",{key:0,"onUpdate:modelValue":r[0]||(r[0]=e=>n.value=e)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.targets(e.person),((e,t)=>((0,o.wg)(),(0,o.iD)("option",{key:t},(0,v.zw)(e),1)))),128))],512)),[[i.bM,n.value]]):(0,o.kq)("",!0),(0,o._)("span",{class:"action",onClick:e=>l(t)},(0,v.zw)(t.name),9,Zt)],64)))),128))]))}};const Vt=(0,l.Z)(zt,[["__scopeId","data-v-1dee4092"]]);var Qt=Vt;const Jt={key:0,class:"inventory"},Xt=(0,o._)("h2",null,"Inventory",-1);var en={__name:"PersonInventory",props:{person:Ht},setup(e){const t=e;return(e,n)=>t.person.inventory.items().length>0?((0,o.wg)(),(0,o.iD)("div",Jt,[Xt,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.person.inventory.items(),((e,n)=>((0,o.wg)(),(0,o.j4)(k,{key:n},{default:(0,o.w5)((()=>[(0,o.Uk)((0,v.zw)(e)+": "+(0,v.zw)(t.person.inventory.has(e)),1)])),_:2},1024)))),128))])):(0,o.kq)("",!0)}};const tn=en;var nn=tn;const on={class:"banner"},sn=["src"],an={class:"right"},ln=(0,o.Uk)(" Doing: ");var rn={__name:"PersonBanner",props:{person:Ht},setup(e){const t=e,n=(0,o.Fl)((()=>t.person.action)),i=()=>`/celestial-warfare/${t.person.face()}`;return(e,a)=>((0,o.wg)(),(0,o.iD)("span",on,[(0,o._)("img",{src:i()},null,8,sn),(0,o._)("span",an,[(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Name: "+(0,v.zw)(t.person.name()),1)])),_:1}),(0,s.SU)(n).hasAction()||t.person.location.is()?.defaultAction?((0,o.wg)(),(0,o.j4)(k,{key:0},{default:(0,o.w5)((()=>[ln,(0,o._)("strong",null,(0,v.zw)((0,s.SU)(n).doing()),1)])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Level: "+(0,v.zw)((0,s.SU)(Ue)(t.person.cultivator.level())),1)])),_:1})])]))}};const cn=(0,l.Z)(rn,[["__scopeId","data-v-0f39b86f"]]);var un=cn;const gn={class:"person"},pn={class:"details"};function dn(e,t){return(0,o.wg)(),(0,o.iD)("span",gn,[(0,o._)("span",pn,[(0,o.WI)(e.$slots,"default",{},void 0,!0)])])}const mn={},hn=(0,l.Z)(mn,[["render",dn],["__scopeId","data-v-4fba9e18"]]);var vn=hn;const fn=100,yn=()=>Ke.store.state.buildingsStore,wn={isBuildingSelected(e){return yn().selected===e},selectBuilding(e){yn().selected=e},getSelectedBuilding(){return yn().selected===fn?lt:yn().plots[yn().selected]},getPlotForBuilding(e){let t=null;for(let n=0;n<yn().plots.length;n++){const i=yn().plots[n];i&&i.title===e&&(t=n)}if(!t)throw`Plot not found for building title ${e}`;return t},getPlots(){return yn().plots},build(e){e.build(),yn().plots[yn().selected]=e}},_n=e=>((0,o.dD)("data-v-a9b037e4"),e=e(),(0,o.Cn)(),e),kn={key:0},bn=_n((()=>(0,o._)("h2",null,"Go to...",-1))),Sn=["onClick","title"],Tn=["src"];var Ln={__name:"PersonActions",props:{person:Ht},setup(e){const t=e,n=e=>`/celestial-warfare/assets/img/${e.icon}`,i=e=>{t.person.location.goTo(e.title),e.title!==q?wn.selectBuilding(wn.getPlotForBuilding(e.title)):Ke.goOutside()};return(e,a)=>t.person.action.hasAction()||!(0,s.SU)(Ke).isSect()||t.person.location.isTravelling()?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",kn,[bn,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,s.SU)(It),((e,s)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:s},[!t.person.location.eq(e.title)&&e.canGo(t.person)&&e.built()?((0,o.wg)(),(0,o.iD)("span",{key:0,class:"goto",onClick:t=>i(e),title:"Go to "+e.title},[(0,o._)("img",{src:n(e)},null,8,Tn)],8,Sn)):(0,o.kq)("",!0)],64)))),128))]))}};const In=(0,l.Z)(Ln,[["__scopeId","data-v-a9b037e4"]]);var An=In;const Dn={key:0},Cn=(0,o._)("h2",null,"Skills",-1);var Pn={__name:"PersonSkills",props:{person:Ht},setup(e){const t=e;return(e,n)=>t.person.skills.listAll().length>0?((0,o.wg)(),(0,o.iD)("div",Dn,[Cn,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.person.skills.listAll(),((e,t)=>((0,o.wg)(),(0,o.j4)(k,{key:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,v.zw)(e),1)])),_:2},1024)))),128))])):(0,o.kq)("",!0)}};const En=Pn;var Mn=En;const Gn=(e,t)=>{const n=5*e.inventory.has(ce)+15*e.inventory.has(ue);return n>=t},Hn={name:"Get Spirit Stones",complete:(e,t)=>Gn(e,t||1),action:e=>{e.location.goTo(q)}},qn={name:"Get Minerals",complete:(e,t)=>e.inventory.has(ge)>=(t||1),action:e=>{e.location.goTo(q)}},Bn={name:"Get Ginseng",complete:(e,t)=>e.inventory.has(ne)>=(t||!0),action:e=>{e.location.goTo(q)}},Yn={name:"Get Fire lily",complete:(e,t)=>e.inventory.has(ie)>=(t||!0),action:e=>{e.location.goTo(q)}},On={name:"Get Foundation Level",complete:e=>e.cultivator.level()>=1,pre:()=>[{g:Hn,q:Le.spiritEnergy}],action:e=>{e.location.goTo(D),e.action.set(X,"")}},Un={name:"Build mountain",complete:()=>ct.built(),action:()=>ct.build()},Fn={name:"Cultivate qi",complete:(e,t)=>!t||e.cultivator.qi()>=t,action:e=>{e.location.goTo(D),e.action.set(X,"")}},Nn={name:"Gain enlightenment",complete:(e,t)=>!t||e.cultivator.enlightenment()>=t,pre:()=>[{g:Un}],action:e=>{e.location.goTo(C),e.action.set(rt,"")}},xn={name:"Get Vision Level",complete:e=>e.cultivator.level()>=2,pre:e=>[{g:On},{g:Hn,q:Ie.spiritEnergy-e.cultivator.qi()},{g:Fn,q:Ie.spiritEnergy},{g:Nn,q:Ie.enlightenment}],action:()=>{}},jn=(e,t)=>{e.location.goTo(B);const n=Q(e).find((e=>e.name.includes(t)));if(!n)throw`Cannot find ${t} book to read`;e.action.set(n,"")},Kn={name:"Learn Apothecary",complete:e=>e.skills.knows(F.APOTHECARY_1),action:e=>jn(e,N.APOTHECARY_1)},Rn={name:"Build Apothecary",complete:()=>at.built(),action:()=>at.build()},Wn={name:"Go to Apothecary",complete:e=>e.location.eq(H),pre:()=>[{g:On},{g:Kn},{g:Rn}],action:e=>e.location.goTo(H)},$n={name:"Study Vitality Pill",complete:e=>e.skills.knows(F.VITALITY_PILL),pre:()=>[{g:Kn}],action:e=>jn(e,N.VITALITY_PILL)},Zn={name:"Concoct Vitality Pill",complete:e=>e.inventory.has(Je.VITALITY_PILL)>=1,pre:()=>[{g:$n},{g:Bn,q:1},{g:Wn}],action:e=>{const t=st(e).find((e=>e.name.includes(Je.VITALITY_PILL)));if(!t)throw"Couldn't find vitality pill action";e.action.set(t,"")}},zn={name:"Build Furnace",complete:()=>bt.built(),action:()=>bt.build()},Vn={name:"Learn crafting",complete:e=>e.skills.knows(F.CRAFTING_1),action:e=>jn(e,N.CRAFTING_LEVEL_1)},Qn={name:"Go to furnace",complete:e=>e.location.eq(M),pre:()=>[{g:On},{g:Vn},{g:zn}],action:e=>e.location.goTo(M)},Jn={name:"Learn crafting shield",complete:e=>e.skills.knows(F.SHIELD),action:e=>jn(e,N.SHIELD_BOOK)},Xn={name:"Craft shield",complete:e=>e.inventory.has(vt.name)>=1,pre:()=>[{g:On},{g:Vn},{g:Jn},{g:Hn,q:vt.materials[ce]},{g:qn,q:vt.materials[ge]},{g:Qn}],action:e=>{const t=kt(e).find((e=>e.name.includes(vt.name)));if(!t)throw"error finding craft shield action";e.action.set(t,"")}},ei={name:"Build beast pavilion",complete:()=>St.built(),action:()=>St.build()},ti={name:"Learn beast taming",complete:e=>e.skills.knows(F.BEAST_TAMING_1),action:e=>jn(e,N.BEAST_TAMING_1)},ni={name:"Go to Beast Pavilion",complete:e=>e.location.eq(Y),pre:()=>[{g:On},{g:ti},{g:ei}],action:e=>e.location.goTo(Y)},ii={name:"Build arena",complete:()=>Lt.built(),action:()=>Lt.build()},oi={name:"Go to arena",complete:e=>e.location.eq(U),pre:()=>[{g:On},{g:ii}],action:e=>e.location.goTo(U)},si={name:"Build formation pavilion",complete:()=>Tt.built(),action:()=>Tt.build()},ai={name:"Learn formations",complete:e=>e.skills.knows(F.FORMATIONS_1),action:e=>jn(e,N.FORMATIONS_1)},li={name:"Go to Formation Pavilion",complete:e=>e.location.eq(O),pre:()=>[{g:On},{g:ai},{g:si}],action:e=>e.location.goTo(O)},ri={name:"Learn Herbalism",complete:e=>e.skills.knows(F.HERBALISM_1),action:e=>jn(e,N.HERBALISM_1)},ci={name:"Build Herb Farm",complete:()=>ht.built(),action:()=>ht.build()},ui={name:"Go to Herb Farm",complete:e=>e.location.eq(G),pre:()=>[{g:On},{g:ri},{g:ci}],action:e=>e.location.goTo(G)},gi={name:"Plant fire lily",complete:e=>dt.getDetails().some((t=>t.item===ie&&t.detail.includes(`${e.id()}`))),pre:()=>[{g:Yn},{g:ui}],action:e=>{const t=mt(e).find((e=>e.name.includes(ie)));if(!t)throw"No action to plant fire lily";e.action.set(t,"")}},pi={name:"Plant ginseng",complete:e=>dt.getDetails().some((t=>t.item===ne&&t.detail.includes(`${e.id()}`))),pre:()=>[{g:Bn},{g:ui}],action:e=>{const t=mt(e).find((e=>e.name.includes(ne)));if(!t)throw"No action to plant ginseng";e.action.set(t,"")}},di=[On,xn,Hn,qn,Bn,Kn,Rn,Wn,Zn,ri,ci,ui,gi,pi,zn,Vn,Qn,Jn,Xn,si,ai,li,ei,ti,ni,ii,oi],mi=e=>{const t=di.find((t=>t.name===e));if(!t)throw"No goal found for name "+e;return t},hi=e=>((0,o.dD)("data-v-6ae3979a"),e=e(),(0,o.Cn)(),e),vi={key:0},fi=hi((()=>(0,o._)("h2",null,"Goals",-1))),yi=(0,o.Uk)(" Current goal: "),wi=(0,o.Uk)(" No goals ");var _i={__name:"PersonGoals",props:{person:Ht},setup(e){const t=e,n=(0,s.iH)(null),a=()=>di.filter((e=>!e.complete(t.person))),l=()=>n.value?mi(n.value):null,r=()=>n.value,c=()=>t.person.goals.assignGoal(l());return(e,s)=>t.person.location.isTravelling()?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",vi,[fi,!t.person.action.hasAction()&&a().length>0?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.wy)((0,o._)("select",{"onUpdate:modelValue":s[0]||(s[0]=e=>n.value=e)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a(),((e,t)=>((0,o.wg)(),(0,o.iD)("option",{key:t},(0,v.zw)(e.name),1)))),128))],512),[[i.bM,n.value]]),r()?((0,o.wg)(),(0,o.iD)("button",{key:0,onClick:c},"Assign goal")):(0,o.kq)("",!0)],64)):t.person.goals.hasGoal()?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[yi,(0,o._)("strong",null,(0,v.zw)(t.person.goals.goalName()),1)],64)):((0,o.wg)(),(0,o.iD)(o.HY,{key:2},[wi],64))]))}};const ki=(0,l.Z)(_i,[["__scopeId","data-v-6ae3979a"]]);var bi=ki;const Si=e=>((0,o.dD)("data-v-984019aa"),e=e(),(0,o.Cn)(),e),Ti={key:0},Li=Si((()=>(0,o._)("h2",null,"Travel",-1))),Ii=Si((()=>(0,o._)("p",null,"Travelling...",-1))),Ai={key:2};var Di={__name:"PersonTravel",props:{person:Ht},setup(e){const t=e,n=()=>t.person.location.canTravel(),i=()=>t.person.location.isTravelling(),a=()=>t.person.location.startTravelling(),l=()=>t.person.location.stopTravelling();return(e,r)=>(0,s.SU)(Ke).isOutside()?((0,o.wg)(),(0,o.iD)("div",Ti,[Li,i()?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[Ii,(0,o._)("p",null,"Time left: "+(0,v.zw)(t.person.location.travelTime()),1),(0,o._)("button",{onClick:l},"Stop travel")],64)):n()?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o._)("p",null,"Time left: "+(0,v.zw)(t.person.location.travelTime()),1),(0,o._)("button",{onClick:a},"Travel")],64)):((0,o.wg)(),(0,o.iD)("p",Ai,"Travel time exhausted this tick"))])):(0,o.kq)("",!0)}};const Ci=(0,l.Z)(Di,[["__scopeId","data-v-984019aa"]]);var Pi=Ci,Ei={__name:"PersonDetails",props:{person:Ht},setup(e){const t=e,n=()=>t.person.location.eq(D)||t.person.location.eq(C)||t.person.location.eq(P),i=()=>t.person.location.eq(E)||t.person.location.eq(M);return(e,s)=>((0,o.wg)(),(0,o.j4)(vn,null,{default:(0,o.w5)((()=>[(0,o.Wm)(un,{person:t.person},null,8,["person"]),(0,o.Wm)(nn,{person:t.person},null,8,["person"]),(0,o.Wm)(Mn,{person:t.person},null,8,["person"]),(0,o._)("h3",null,"At "+(0,v.zw)(t.person.location.is().title),1),n()?((0,o.wg)(),(0,o.j4)(Ut,{key:0,person:t.person},null,8,["person"])):(0,o.kq)("",!0),i()?((0,o.wg)(),(0,o.j4)(Kt,{key:1,person:t.person},null,8,["person"])):(0,o.kq)("",!0),(0,o.Wm)(Qt,{person:t.person},null,8,["person"]),(0,o.Wm)(bi,{person:t.person},null,8,["person"]),(0,o.Wm)(An,{person:t.person},null,8,["person"]),(0,o.Wm)(Pi,{person:t.person},null,8,["person"])])),_:1}))}};const Mi=(0,l.Z)(Ei,[["__scopeId","data-v-65d88a58"]]);var Gi=Mi;const Hi={class:"section"};function qi(e,t){return(0,o.wg)(),(0,o.iD)("div",Hi,[(0,o.WI)(e.$slots,"default",{},void 0,!0)])}const Bi={},Yi=(0,l.Z)(Bi,[["render",qi],["__scopeId","data-v-39941380"]]);var Oi=Yi,Ui={add:(e,t)=>{console.log(`adding to inventory ${e} x ${t}`);const n=Ke.store.state.inventory;n[e]?n[e]+=t:n[e]=t},consume:(e,t)=>{const n=Ke.store.state.inventory;n[e]-=t},list:()=>Object.keys(Ke.store.state.inventory),quantity:e=>Ke.store.state.inventory[e]};const Fi=e=>((0,o.dD)("data-v-6af3b92b"),e=e(),(0,o.Cn)(),e),Ni=Fi((()=>(0,o._)("h2",null,"Inventory",-1)));var xi={__name:"InventorySection",setup(e){const t=()=>Ui.list();return(e,n)=>((0,o.wg)(),(0,o.j4)(Oi,{class:"inventory"},{default:(0,o.w5)((()=>[Ni,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t(),((e,t)=>((0,o.wg)(),(0,o.j4)(k,{key:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,v.zw)(e)+": "+(0,v.zw)((0,s.SU)(Ui).quantity(e)),1)])),_:2},1024)))),128))])),_:1}))}};const ji=(0,l.Z)(xi,[["__scopeId","data-v-6af3b92b"]]);var Ki=ji;const Ri=["src"];var Wi={__name:"BuildingLabel",props:{img:String,title:String,center:{type:Boolean,default:!1}},setup(e){const t=e;console.log("process.env.BASE_URL: /celestial-warfare/");const n=()=>`/celestial-warfare/assets/img/${t.img}`;return(e,i)=>((0,o.wg)(),(0,o.iD)("label",{class:(0,v.C_)(t.center?"center":"")},[(0,o._)("img",{src:n()},null,8,Ri),(0,o.Uk)(" "+(0,v.zw)(t.title),1)],2))}};const $i=(0,l.Z)(Wi,[["__scopeId","data-v-05bb8b78"]]);var Zi=$i;const zi=["src"],Vi=["src"],Qi=["src"];var Ji={__name:"PersonMeeple",props:{person:Ht},setup(e){const t=e,n=()=>"/celestial-warfare/assets/img/blue_meeple.webp",i=()=>"/celestial-warfare/assets/img/pink_meeple.webp";return(e,a)=>t.person.isSelected()?((0,o.wg)(),(0,o.iD)("img",{key:0,id:"meeple",class:"face",src:t.person.face()},null,8,zi)):t.person.gender()===(0,s.SU)(Pe).Male?((0,o.wg)(),(0,o.iD)("img",{key:1,id:"meeple",src:n()},null,8,Vi)):((0,o.wg)(),(0,o.iD)("img",{key:2,id:"meeple",src:i()},null,8,Qi))}};const Xi=(0,l.Z)(Ji,[["__scopeId","data-v-81c228c4"]]);var eo=Xi;const to={key:0,class:"centered"};var no={__name:"BuildingDiv",props:{building:{},plotNumber:Number},setup(e){const t=e,n=()=>wn.isBuildingSelected(t.plotNumber),i=()=>wn.selectBuilding(t.plotNumber);return(e,s)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,v.C_)(["building",n()?"selected":""]),onClick:i},[t.building?((0,o.wg)(),(0,o.iD)(o.HY,{key:1},[(0,o.Wm)(Zi,{img:t.building.icon,title:t.building.title,center:!0},null,8,["img","title"]),t.building.details?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:0},(0,o.Ko)(t.building.details(),((e,t)=>((0,o.wg)(),(0,o.j4)(k,{key:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,v.zw)(e.item)+": "+(0,v.zw)(e.detail),1)])),_:2},1024)))),128)):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.building.occupants(),((e,t)=>((0,o.wg)(),(0,o.j4)(eo,{key:t,person:e},null,8,["person"])))),128))],64)):((0,o.wg)(),(0,o.iD)("label",to,"Empty land"))],2))}};const io=(0,l.Z)(no,[["__scopeId","data-v-9cfcc954"]]);var oo=io;const so={key:0},ao=["src"],lo={key:1},ro=["src"];var co={__name:"PersonGender",props:{person:Ht},setup(e){const t=e,n=()=>"/celestial-warfare/assets/img/symbol_male.png",i=()=>"/celestial-warfare/assets/img/symbol_female.png";return(e,a)=>t.person.gender()===(0,s.SU)(Pe).Male?((0,o.wg)(),(0,o.iD)("span",so,[(0,o._)("img",{src:n()},null,8,ao)])):((0,o.wg)(),(0,o.iD)("span",lo,[(0,o._)("img",{src:i()},null,8,ro)]))}};const uo=(0,l.Z)(co,[["__scopeId","data-v-37c42dc8"]]);var go=uo;const po=["src"],mo={class:"right"};var ho={__name:"PersonSynopsis",props:{person:Ht},setup(e){const t=e,n=(0,o.Fl)((()=>t.person.action)),i=()=>t.person.isSelected(),a=()=>Ke.setSelectedPerson(t.person.id());return(e,l)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,v.C_)(["banner",i()?"selected":"clickable"]),onClick:a},[(0,o._)("img",{src:t.person.face()},null,8,po),(0,o._)("span",mo,[(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Wm)(go,{person:t.person},null,8,["person"]),(0,o.Uk)((0,v.zw)(t.person.name()),1)])),_:1}),(0,s.SU)(n).hasAction()||t.person.location.is()?.defaultAction?((0,o.wg)(),(0,o.j4)(k,{key:0},{default:(0,o.w5)((()=>[(0,o._)("strong",null,(0,v.zw)((0,s.SU)(n).doing()),1)])),_:1})):(0,o.kq)("",!0)])],2))}};const vo=(0,l.Z)(ho,[["__scopeId","data-v-6337f314"]]);var fo=vo;const yo={class:"topBox"};function wo(e,t){return(0,o.wg)(),(0,o.iD)("div",yo,[(0,o.WI)(e.$slots,"default",{},void 0,!0)])}const _o={},ko=(0,l.Z)(_o,[["render",wo],["__scopeId","data-v-3e86ac9d"]]);var bo=ko;const So=e=>((0,o.dD)("data-v-6f2bf2f1"),e=e(),(0,o.Cn)(),e),To={key:1,class:"chooseBuilding"},Lo=["onClick"],Io=So((()=>(0,o._)("label",{class:"title"},"Build:",-1)));var Ao={__name:"BuildingBar",setup(e){const t=()=>wn.getSelectedBuilding(),n=()=>It.filter((e=>!e.built()&&e.canBuild())),i=e=>wn.build(e);return(e,s)=>((0,o.wg)(),(0,o.j4)(bo,null,{default:(0,o.w5)((()=>[t()&&t().built()?((0,o.wg)(),(0,o.iD)(o.HY,{key:0},[(0,o.Wm)(Zi,{img:t().icon,title:t().title},null,8,["img","title"]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t().occupants(),((e,t)=>((0,o.wg)(),(0,o.j4)(fo,{key:t,person:e},null,8,["person"])))),128))],64)):((0,o.wg)(),(0,o.iD)("div",To,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n(),((e,t)=>((0,o.wg)(),(0,o.iD)("span",{key:t,class:"canBuild",onClick:t=>i(e)},[Io,(0,o.Wm)(Zi,{img:e.icon,title:e.title},null,8,["img","title"])],8,Lo)))),128))]))])),_:1}))}};const Do=(0,l.Z)(Ao,[["__scopeId","data-v-6f2bf2f1"]]);var Co=Do;const Po=e=>((0,o.dD)("data-v-815ae7f8"),e=e(),(0,o.Cn)(),e),Eo={class:"buildings"},Mo=Po((()=>(0,o._)("div",null,null,-1))),Go={class:"sect"};var Ho={__name:"SectView",setup(e){return(e,t)=>((0,o.wg)(),(0,o.iD)("div",Eo,[(0,o.Wm)(oo,{building:(0,s.SU)(lt),plotNumber:(0,s.SU)(fn),onClick:t[0]||(t[0]=e=>(0,s.SU)(Ke).goOutside())},null,8,["building","plotNumber"]),(0,o.Wm)(Co),(0,o.Wm)(Ki),Mo,(0,o._)("div",null,[(0,o._)("div",Go,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,s.SU)(wn).getPlots(),((e,t)=>((0,o.wg)(),(0,o.j4)(oo,{key:t,building:e,plotNumber:t},null,8,["building","plotNumber"])))),128))])])]))}};const qo=(0,l.Z)(Ho,[["__scopeId","data-v-815ae7f8"]]);var Bo=qo;const Yo=e=>((0,o.dD)("data-v-6ee6435e"),e=e(),(0,o.Cn)(),e),Oo=["src"],Uo=["src"],Fo=Yo((()=>(0,o._)("span",{class:"ring"},null,-1))),No={class:"meeples"},xo={class:"resources"},jo=["src"],Ko={key:1,class:"matte"};var Ro={__name:"TileView",props:{tile:Object,coords:{x:Number,y:Number},selected:Boolean},setup(e){const t=e,n=()=>`/celestial-warfare/assets/img/tiles/${t.tile.tile}`,i=()=>`/celestial-warfare/assets/img/tiles/${t.tile.building}`,s=()=>`/celestial-warfare/assets/img/${r().icon}`,a=()=>Ke.people().filter((e=>e.location.eq(q)&&e.location.coordsIs(t.coords))),l=()=>Ke.getSelectedPerson()&&Ke.getSelectedPerson().location.isTravelling()&&!Ke.getSelectedPerson().location.inTravelRegion(t.coords.x,t.coords.y),r=()=>t.tile.resource?t.tile.resource:void 0;return(e,c)=>((0,o.wg)(),(0,o.iD)("span",{class:(0,v.C_)(["tile",t.selected?"selected":t.tile.color])},[(0,o._)("img",{src:n()},null,8,Oo),t.tile.building?((0,o.wg)(),(0,o.iD)("img",{key:0,src:i(),class:"building"},null,8,Uo)):(0,o.kq)("",!0),Fo,(0,o._)("span",No,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a(),((e,t)=>((0,o.wg)(),(0,o.j4)(eo,{key:t,person:e},null,8,["person"])))),128))]),(0,o._)("span",xo,[r()?((0,o.wg)(),(0,o.iD)("img",{key:0,src:s()},null,8,jo)):(0,o.kq)("",!0)]),l()?((0,o.wg)(),(0,o.iD)("span",Ko)):(0,o.kq)("",!0)],2))}};const Wo=(0,l.Z)(Ro,[["__scopeId","data-v-6ee6435e"]]);var $o=Wo;const Zo={key:0,class:"resource-desc"},zo=["src"];var Vo={__name:"TileBar",setup(e){const t=()=>Ct.selectedTileOccupants(),n=()=>Ct.selectedTile(),i=()=>n().resource?n().resource:void 0,s=()=>`/celestial-warfare/assets/img/${i().icon}`;return(e,a)=>((0,o.wg)(),(0,o.j4)(bo,null,{default:(0,o.w5)((()=>[(0,o._)("h2",null,(0,v.zw)(n().type),1),i()?((0,o.wg)(),(0,o.iD)("span",Zo,[(0,o._)("img",{src:s()},null,8,zo),(0,o._)("label",null,(0,v.zw)(i().type),1),(0,o._)("p",null,(0,v.zw)(i().description),1)])):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t(),((e,t)=>((0,o.wg)(),(0,o.j4)(fo,{key:t,person:e},null,8,["person"])))),128))])),_:1}))}};const Qo=(0,l.Z)(Vo,[["__scopeId","data-v-08a95916"]]);var Jo=Qo;const Xo=e=>((0,o.dD)("data-v-f46cd2aa"),e=e(),(0,o.Cn)(),e),es={class:"outsideView"},ts=Xo((()=>(0,o._)("div",null,null,-1))),ns={class:"map"};var is={__name:"OutsideView",setup(e){const t=(e,t)=>{Ct.selectTile(e,t),Ke.getSelectedPerson()&&Ke.getSelectedPerson().location.isTravelling()&&Ke.getSelectedPerson().location.inTravelRegion(e,t)&&Ke.getSelectedPerson().location.travelTo(e,t)};return(e,n)=>((0,o.wg)(),(0,o.iD)("div",es,[(0,o._)("button",{onClick:n[0]||(n[0]=e=>(0,s.SU)(Ke).goSect())},"Return to Sect"),(0,o.Wm)(Jo),ts,(0,o._)("div",ns,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,s.SU)(Ct).getTiles(),((e,n)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:n},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e,((e,i)=>((0,o.wg)(),(0,o.j4)($o,{key:i,tile:e,coords:{x:i,y:n},selected:(0,s.SU)(Ct).tileSelected(i,n),onClick:e=>t(i,n)},null,8,["tile","coords","selected","onClick"])))),128))],64)))),128))])]))}};const os=(0,l.Z)(is,[["__scopeId","data-v-f46cd2aa"]]);var ss=os;const as=()=>{Ke.people().forEach((e=>{if(e.action.hasAction())e.action.perform(),e.action.clear();else{const t=e.location.is();t?.defaultAction&&t.defaultAction.action(e)}e.goals.hasGoal()&&e.goals.processGoal(),e.location.restoreEnergy()})),dt.grow()},ls={class:"main"},rs=(0,o.Uk)("Recruit"),cs=(0,o.Uk)("Next Tick");var us={__name:"App",setup(e){const t=()=>{const e=Ke.getSelectedPerson();return e},n=()=>Ke.hasTraveller();return(e,i)=>((0,o.wg)(),(0,o.iD)("div",ls,[(0,s.SU)(Ke).isSect()?((0,o.wg)(),(0,o.j4)(Bo,{key:0})):(0,o.kq)("",!0),(0,s.SU)(Ke).isOutside()?((0,o.wg)(),(0,o.j4)(ss,{key:1})):(0,o.kq)("",!0),(0,o.Wm)(h,null,{default:(0,o.w5)((()=>[n()?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(u,{key:0,onClick:i[0]||(i[0]=e=>(0,s.SU)(Ke).recruit())},{default:(0,o.w5)((()=>[rs])),_:1})),t()?((0,o.wg)(),(0,o.j4)(Gi,{key:1,person:t()},null,8,["person"])):(0,o.kq)("",!0),n()?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(u,{key:2,onClick:(0,s.SU)(as)},{default:(0,o.w5)((()=>[cs])),_:1},8,["onClick"]))])),_:1})]))}};const gs=(0,l.Z)(us,[["__scopeId","data-v-9a1a945a"]]);var ps=gs;(0,i.ri)(ps).use(Ke.store).mount("#app")}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.m=e,function(){var e=[];n.O=function(t,i,o,s){if(!i){var a=1/0;for(u=0;u<e.length;u++){i=e[u][0],o=e[u][1],s=e[u][2];for(var l=!0,r=0;r<i.length;r++)(!1&s||a>=s)&&Object.keys(n.O).every((function(e){return n.O[e](i[r])}))?i.splice(r--,1):(l=!1,s<a&&(a=s));if(l){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[i,o,s]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,s,a=i[0],l=i[1],r=i[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(r)var u=r(n)}for(t&&t(i);c<a.length;c++)s=a[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(u)},i=self["webpackChunkcelestial_warfare"]=self["webpackChunkcelestial_warfare"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(3675)}));i=n.O(i)})();
//# sourceMappingURL=app.3966be5e.js.map